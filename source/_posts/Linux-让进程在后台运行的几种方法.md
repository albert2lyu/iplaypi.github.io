---
title: Linux 让进程在后台运行的几种方法
id: 2019051501
date: 2019-05-15 15:49:53
updated: 2019-06-08 15:49:53
categories: 大数据技术知识
tags: [Linux,nohup,setsid,disown,screen]
keywords: Linux,nohup,setsid,disown,screen
---


在 Linux 系统中，运行程序时经常需要把进程放在后台运行，并且退出终端等待，可能过几个小时或者十几个小时之后再去观察。此时，需要把进程放入后台运行，并且为了防止进程挂起，也需要设置进程忽略挂起信号【使用 nohup 命令】，这样就可以保证进程在我退出终端后仍旧能正常运行，无论我多久之后再来观察，仍可以看到进程的信息。本文记录关于进程后台运行的几种方法，并给出实际操作示例。


<!-- more -->


# 前言


在我刚开始步入工作的路途上，算是一个职场新手，很多东西都不会，一路上披荆斩棘，现在总算积累了一些经验。记得在刚开始工作时，经常碰到这样的问题，使用 telnet 或者 ssh 登录了远程的 Linux 服务器【很多工作需要在 Linux 上面完成】，在上面跑了几个 Shell 脚本，或者起了几个 Java 进程，而且这些脚本或者进程耗时都比较长，可能需要几个小时或者几天。我一开始的做法就是打开 XShell 工具的多个会话，分别跑脚本或者起进程，不仅不能关掉，而且还要担心网络问题导致会话断开，一切工作就白费了。

结果被其他同事看到了，说我这种做法太蠢了，可以使用后台挂起的命令【即 nohup 加上 &】，这样就可以让进程自由在在地运行，我也可以安心做其它事情了。我第一次受到了经验方面的冲击，觉得这种方式太酷了，一开始我为什么不多思考一下或者查询一下，我想这些实用的知识点肯定还有很多，从此以后我更加努力。

在后来的工作或者生活当中，我又接触到了很多类似的知识点或者说是小技巧，不仅提高了我的工作效率，还丰富了我的认知。其中，基于进程的后台运行这个需求，还有很多很好的工具可以使用，还有很多实际操作的小技巧可以使用，以下篇幅会一一介绍。继续阅读之前，可以先了解一下信号的概念，也可以直接参考我的另外一篇博文：[Linux 之 kill 命令入门实践](https://www.playpi.org/2019042101) 。


1、关于挂起的测试

我使用 XShell 测试退出终端时，发现并不会挂起普通的后台进程【说明后台进程没有接收到 SIGHUP 信号】，反而把进程的父进程设置为了 init，这样进程就不会退出，下次登录的时候还能查看。但是这个现象违反了前面的知识点：退出终端时进程会收到 SIGHUP 信号，后来我发现，原来这个操作是针对**前台任务**而言的，如果是**后台任务**则不一定，要看系统的参数设置：`shopt | grep huponexit`，`huponexit` 这个参数决定了是否向后台任务发送 SIGHUP 信号。而在大多数 Linux 系统中，这个参数一般默认是关闭的，所以才出现了终端退出后台进程没有挂起的现象。

