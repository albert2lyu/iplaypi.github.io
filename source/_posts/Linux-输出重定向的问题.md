---
title: Linux 输出重定向的问题
id: 2017050401
date: 2017-05-04 21:50:17
updated: 2019-04-24 21:50:17
categories: Linux 命令系列
tags: [Linux,redirect]
keywords: Linux,redirect
---


最近遇到一个好玩的事，在使用 Linux 命令执行任务【Java 程序或者 Python 程序】时，需要把输出内容日志重定向到文件中，并且保持任务后台执行，这样就可以继续执行其它的命令，不占用 SSH 的 session。而且，如果等不及，直接退出 SSH 登录即可，任务会在后台继续执行，下次重新登录时可以继续查看任务的状态、分析日志的内容。这里面会涉及到重定向、设备文件、输出类型的概念，本文记录这个问题以及涉及的相关知识点。


<!-- more -->


# 基础概念


https://blog.csdn.net/ithomer/article/details/9288353 


# 详细举例


在这里如果只使用 nohup 不使用 & 把程序后台挂起，表面上看把输出日志重定向文件中了，屏幕不再滚动打印出来大量的文本内容。其实，程序此时仍旧在占用着键盘的输入流，你的命令行在等待着输入，你无法使用键盘进行其它的命令操作，而且你不能使用 ctrl + c 的方式中断，否则程序会退出。



# 注意事项


1、在执行 Python 脚本时，发现日志内容并没有及时更新【在 Python 脚本中 print 的内容】，实时查看日志文件的内容【使用 tail -f name.log 命令】，发现不会像 Java 程序那样实时刷出来新的内容，而是会卡住一段时间，然后突然一大段日志出来。造成这种现象的原因是 Python 有输出流缓存机制，不会把输出内容实时写入输出流，而是等待缓冲区积累一定的内容再操作，这样一来，重定向到文件中的内容总是一批一批的。

当然，可以选择关闭这个选项，在执行 Python 脚本时，使用 -u 参数就可以把输出内容实时写入到输出流，也就可以实时重定向到日志文件了。

